#! /bin/sh
#
# apply migrations and create a super user


# set user and group id of the current user
. ./bin/get_local_env.dev

# migrate database

echo "migrate"
docker-compose run web python manage.py makemigrations 
docker-compose run web python manage.py migrate


echo "create superuser"
# create superuser admin account
# todo: frist, check if this user exists
docker-compose run web python manage.py shell -c "from django.contrib.auth.models import User; User.objects.create_superuser('admin', 'admin@example.com', '1234')"
